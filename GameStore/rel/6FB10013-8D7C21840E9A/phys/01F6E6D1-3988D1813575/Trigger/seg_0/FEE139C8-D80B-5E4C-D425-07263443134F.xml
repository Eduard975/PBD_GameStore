<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="TRG_ORDERS_STOCK_CHECK" directorySegmentName="seg_0" id="FEE139C8-D80B-5E4C-D425-07263443134F">
<sourceDDLFile>CreateGameStore.sql</sourceDDLFile>
<createdBy>Rino</createdBy>
<createdTime>2025-05-19 11:03:57 UTC</createdTime>
<ownerDesignName>GameStore</ownerDesignName>
<actions>INSERT, UPDATE</actions>
<body><![CDATA[DECLARE
  V_STOCK GAMES.STOCK%TYPE;
BEGIN
  SELECT STOCK
    INTO V_STOCK
    FROM GAMES
   WHERE GID = :NEW.GAMES_GID;
  IF :NEW.GQUANTITY > V_STOCK THEN
    RAISE_APPLICATION_ERROR(
      -20001,
      'Order quantity exceeds available stock.'
    );
  END IF;
END;]]></body>
<triggerTime>BEFORE</triggerTime>
<table>BD376D40-F981-E61A-9A07-12AA6B4236E5</table>
</TriggerOraclev10g>